enum UnitType {
    CHAT
    USER
}
enum FieldType {
    EMAIL
    DATE
    LINK
    TEXT
    NUMERIC
    SELECTOR
}
enum MessageType {
    SYSTEM
    USER
    FORMATTED
}
enum Char {
    ADMIN
    MODER
    NONE
}

input Params {
    limit: Int = 20
    offset: Int = 0
}

type TokenPair {
    access_token: String!
    refresh_token: String!
}

type Unit {
    id: ID!
    domain: String!
    name: String!
    type: UnitType!
}

type Chat {
    unit: Unit!
    owner: User! @goField(forceResolver: true)
    rooms: [Room!] @goField(forceResolver: true)
    private: Boolean!
    count_members: Int! @goField(forceResolver: true)
    members: [ChatMember!] @goField(forceResolver: true)
    roles: [Role!] @goField(forceResolver: true)
    invites: [Invite!] @goField(forceResolver: true)
    banlist: [User!] @goField(forceResolver: true)
    me_restricts: [MeRestricts!] @goField(forceResolver: true)
}
type MeRestricts {
    chat: Chat!@goField(forceResolver: true)
    frozen: Boolean!
    muted: Boolean!
    banned: Boolean!
}
type Room {
    id: ID!
    chat: Chat! @goField(forceResolver: true)
    name: String!
    parent: Room
    note: String
    msg_format: Form
    restricts: Restricts @goField(forceResolver: true)
    messages: [Message!] @goField(forceResolver: true)
}

type Form {
    fields: [FormField!]!
}

type FormField {
    key: String!
    type: FieldType!
    optional: Boolean!
    length: Int
    items: [String!]
}

type ChatMember {
    chat: Chat! @goField(forceResolver: true)
    user: User! @goField(forceResolver: true)
    role: Role
    char: Char
    joined_at: Int!
}

type RoleArray {
    roles: [Role!]
}

type Role {
    id: ID!
    users: [User!] @goField(forceResolver: true)
    name: String!
    color: String!
}

type Message {
    id: ID!
    room: Room @goField(forceResolver: true)
    reply_to: Message @goField(forceResolver: true)
    author: Unit! @goField(forceResolver: true)
    body: String!
    type: MessageType!
    date: Int!
}

type Invite {
    chat: Chat! @goField(forceResolver: true)
    code: String!
    aliens: Int
    exp: Int
}
type InviteInfo {
    unit: Unit!
    private: Boolean!
    count_members: Int! @goField(forceResolver: true)
}
type User {
    unit: Unit!
}
type Restricts {
    allow_read: PermissionHolders
    allow_write: PermissionHolders
}
type PermissionHolders {
    roles: [Role!] @goField(forceResolver: true)
    chars: [Char!] @goField(forceResolver: true)
    members: [ChatMember!] @goField(forceResolver: true)
}

input FindByDomainOrID {
    id: Int
    domain: String
}